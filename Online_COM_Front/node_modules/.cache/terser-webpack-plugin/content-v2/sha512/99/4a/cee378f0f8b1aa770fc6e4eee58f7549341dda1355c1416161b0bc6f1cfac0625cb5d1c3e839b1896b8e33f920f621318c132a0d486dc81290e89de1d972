{"code":"(wx[\"webpackJsonp\"]=wx[\"webpackJsonp\"]||[]).push([[36],{109:function(e,t,s){},127:function(e,t,s){\"use strict\";s.r(t);var a=s(4),n=s(6),i=s(7),r=s(9),c=s(10),l=s(1),o=s(3),d=s.n(o),u=s(0),h=s(8),m=s(28),O=(s(109),s(2)),j=[[\"8:00~8:30\",\"8:30~9:00\",\"9:00~9:30\",\"9:30~10:00\"],[\"10:00~10:30\",\"10:30~11:00\",\"11:00~11:30\",\"11:30~12:00\"],[\"12:00~12:30\",\"12:30~13:00\",\"13:00~13:30\",\"13:30~14:00\"],[\"14:00~14:30\",\"14:30~15:00\",\"15:00~15:30\",\"15:30~16:00\"],[\"16:00~16:30\",\"16:30~17:00\",\"17:00~17:30\",\"17:30~18:00\"],[\"18:00~18:30\",\"18:30~19:00\",\"19:00~19:30\",\"19:30~20:00\"],[\"20:00~20:30\",\"20:30~21:00\",\"21:00~21:30\",\"21:30~22:00\"]],p=d.a.getApp(),f=new Date,b=function(e){Object(r[\"a\"])(s,e);var t=Object(c[\"a\"])(s);function s(e){var a;return Object(n[\"a\"])(this,s),a=t.call(this,e),a.state={year:f.getFullYear(),month:f.getMonth(),date:f.getDate(),select:[],selected:[],tableID:0,select_Time:[],resultValue:\"\",isOpened:!1,isFinished:!1},a}return Object(i[\"a\"])(s,[{key:\"componentDidMount\",value:function(){}},{key:\"componentWillReceiveProps\",value:function(e){console.log(this.props,e)}},{key:\"componentWillUnmount\",value:function(){}},{key:\"componentDidShow\",value:function(){}},{key:\"componentDidHide\",value:function(){}},{key:\"dateChange\",value:function(e,t,s){var a=this;this.setState({year:e,month:t,date:s},(function(){console.log(a.state.year)}))}},{key:\"handOnSetOrder\",value:function(){var e=this,t=p.post.request(\"/order\",\"GET\",{year:this.state.year,month:this.state.month,date:this.state.date});t.then((function(t){if(0===t.data.length){var s=p.post.request(\"/order/add\",\"POST\",{year:e.state.year,month:e.state.month,date:e.state.date,selected:JSON.stringify(new Array(28).fill(0))});s.then((function(t){e.setState({select:new Array(28).fill(0),selected:new Array(28).fill(0),select_Time:[],tableID:t.data.data.insertId})}))}else e.setState({select:JSON.parse(t.data[0].status),selected:JSON.parse(t.data[0].status),select_Time:[],tableID:t.data[0].id})})),this.setState({isOpened:!0})}},{key:\"handOnResult\",value:function(e){this.setState({resultValue:e})}},{key:\"handOnClose\",value:function(){this.setState({isOpened:!1})}},{key:\"timeSelected\",value:function(e){var t=this;this.setState({select:this.state.select.map((function(s,a){return a===e.currentTarget.dataset.selected&&0===t.state.selected[a]?1===s?0:1:s})),select_Time:0===this.state.selected[e.currentTarget.dataset.selected]?this.state.select_Time.concat(e.currentTarget.dataset.selectTime):this.state.select_Time})}},{key:\"setOrderTime\",value:function(){var e=this;p.post.request(\"/order/update\",\"POST\",{year:this.state.year,month:this.state.month,date:this.state.date,selected:JSON.stringify(this.state.select),id:this.state.tableID}),p.post.request(\"/order/detail\",\"POST\",{year:this.state.year,month:this.state.month,date:this.state.date,selectTime:JSON.stringify(this.state.select_Time),result:this.state.resultValue}),this.setState({isFinished:!0}),setTimeout((function(){return e.setState({isOpened:!1,isFinished:!1,resultValue:[]})}),1e3)}},{key:\"render\",value:function(){var e=this;return Object(O[\"jsxs\"])(u[\"s\"],{className:\"container\",children:[Object(O[\"jsx\"])(m[\"a\"],{isOpen:!0,dateUpdate:function(t,s,a){return e.dateChange(t,s,a)}}),Object(O[\"jsx\"])(u[\"s\"],{className:\"gap-1\"}),Object(O[\"jsx\"])(u[\"s\"],{className:\"submit\",onClick:function(){return e.handOnSetOrder()},children:Object(O[\"jsx\"])(u[\"q\"],{children:\"\\u70b9\\u51fb\\u9884\\u7ea6\"})}),Object(O[\"jsxs\"])(h[\"g\"],{className:\"at-float-layout\",isOpened:this.state.isOpened,title:\"\\u9884\\u7ea6\\u65f6\\u95f4\",onClose:function(){return e.handOnClose()},children:[Object(O[\"jsx\"])(u[\"s\"],{className:\"order-body\",children:j.map((function(t,s){return Object(O[\"jsx\"])(u[\"s\"],{className:\"order-time\",children:t.map((function(t,a){return Object(O[\"jsx\"])(u[\"s\"],{className:[\"order\",1===e.state.select[4*s+a]&&0===e.state.selected[4*s+a]?\"order-current\":\"\",0===e.state.selected[4*s+a]?\"\":\"order-holder\"].join(),\"data-selected\":4*s+a,\"data-selectTime\":t,onClick:function(t){return e.timeSelected(t)},children:Object(O[\"jsx\"])(u[\"q\"],{className:\"orderbox\",children:t})},a)}))},s)}))}),Object(O[\"jsxs\"])(u[\"s\"],{className:\"title\",children:[Object(O[\"jsx\"])(u[\"s\"],{className:\"title-dot\"}),Object(O[\"jsx\"])(u[\"q\"],{className:\"act-title\",children:\"\\u7533\\u8bf7\\u8bf4\\u660e\"})]}),Object(O[\"jsx\"])(h[\"o\"],{value:this.state.resultValue,onChange:function(t){return e.handOnResult(t)},count:!1,maxLength:200,placeholder:\"\\u7533\\u8bf7\\u4e8b\\u7531...\",height:80}),Object(O[\"jsx\"])(u[\"s\"],{className:\"order-submit\",onClick:function(){return e.setOrderTime()},children:Object(O[\"jsx\"])(u[\"q\"],{children:\"\\u786e\\u8ba4\\u9884\\u7ea6\"})}),Object(O[\"jsx\"])(h[\"p\"],{isOpened:this.state.isFinished,text:\"\\u9884\\u7ea6\\u6210\\u529f\"})]})]})}}]),s}(l[\"Component\"]),y=b,g={navigationBarTitleText:\"\\u9884\\u7ea6\\u65f6\\u95f4\"};Page(Object(a[\"createPageConfig\"])(y,\"pages/orderTime/orderTime\",{root:{cn:[]}},g||{}))}},[[127,0,1,2,3]]]);","extractedComments":[]}